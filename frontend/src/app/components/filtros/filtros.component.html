<div class="filtros-container">
  <!-- Botón para mostrar filtros (mobile) -->
  <button class="filtros-toggle" (click)="toggleFiltros()">
    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
      <line x1="4" y1="21" x2="4" y2="14"></line>
      <line x1="4" y1="10" x2="4" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="12"></line>
      <line x1="12" y1="8" x2="12" y2="3"></line>
      <line x1="20" y1="21" x2="20" y2="16"></line>
      <line x1="20" y1="12" x2="20" y2="3"></line>
      <line x1="1" y1="14" x2="7" y2="14"></line>
      <line x1="9" y1="8" x2="15" y2="8"></line>
      <line x1="17" y1="16" x2="23" y2="16"></line>
    </svg>
    Filtrar
    <span class="badge" *ngIf="cantidadFiltrosActivos > 0">{{ cantidadFiltrosActivos }}</span>
  </button>

  <!-- Panel de filtros -->
  <div class="filtros-panel" [class.show]="mostrarFiltros">
    <div class="filtros-header">
      <h3>Filtros</h3>
      <button class="close-btn" (click)="toggleFiltros()">✕</button>
    </div>

    <div class="filtros-content">
      <!-- Talle -->
      <div class="filtro-group">
        <label>Talle</label>
        <select [(ngModel)]="filtrosActivos.talle" (change)="aplicarFiltros()">
          <option [ngValue]="undefined">Todos</option>
          <option *ngFor="let talle of talles" [value]="talle">{{ talle }}</option>
        </select>
      </div>

      <!-- Marca -->
      <div class="filtro-group">
        <label>Marca</label>
        <select [(ngModel)]="filtrosActivos.idMarca" (change)="aplicarFiltros()">
          <option [ngValue]="undefined">Todas</option>
          <option *ngFor="let marca of marcas" [value]="marca.idMarca">{{ marca.nombreMarca }}</option>
        </select>
      </div>

      <!-- Tipo de Prenda -->
      <div class="filtro-group">
        <label>Tipo</label>
        <select [(ngModel)]="filtrosActivos.idTipoPrenda" (change)="aplicarFiltros()">
          <option [ngValue]="undefined">Todos</option>
          <option *ngFor="let tipo of tiposPrenda" [value]="tipo.idTipoPrenda">{{ tipo.nombreTipo }}</option>
        </select>
      </div>

      <!-- Precio -->
      <div class="filtro-group">
        <label>Precio</label>
        <div class="precio-inputs">
          <input 
            type="number" 
            placeholder="Mín"
            [(ngModel)]="filtrosActivos.precioMin"
            (change)="aplicarFiltros()"
          />
          <span>-</span>
          <input 
            type="number" 
            placeholder="Máx"
            [(ngModel)]="filtrosActivos.precioMax"
            (change)="aplicarFiltros()"
          />
        </div>
      </div>

      <!-- Botones -->
      <div class="filtros-actions">
        <button class="btn-secondary" (click)="limpiarFiltros()">Limpiar</button>
        <button class="btn-primary" (click)="aplicarFiltros()">Aplicar</button>
      </div>
    </div>
  </div>

  <!-- Overlay para cerrar en mobile -->
  <div class="filtros-overlay" *ngIf="mostrarFiltros" (click)="toggleFiltros()"></div>
</div>